<mvc:View xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    controllerName="cles.agenti.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <f:DynamicPage id="dettaglio_ordine"
        headerExpanded="true"
        toggleHeaderOnTitleClick="false"
        fitContent="false"
        showFooter="{main>/showFooter}">
        <f:title>
            <f:DynamicPageTitle >
                <f:heading>
                    <Title text="Dettaglio Ordine" />
                </f:heading>
                <f:actions>
                    <Button text="Analisi"
                        type="Emphasized" />
                    <Button text="Fatture"
                        type="Emphasized" />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader backgroundDesign="Solid">
                <f:content>
                    <HBox width="100%"
                        alignItems="Start">
                        <VBox width="100%"
                            class="sapUiTinyMarginEnd">
                            <Label text="Cliente:" design="Bold"/>
                            <Input showValueHelp="true"
                                value="{main>/header/customer/items/0/customer_name}" />
                            <Label text="Note di Testata:" design="Bold" />
                            <TextArea rows="4"
                                cols="120" value="{main>/header/notes/value}" />
                        </VBox>
                        <ScrollContainer height="185px"
                            horizontal="false"
                            vertical="true">
                            <Label text="Allegati di Testata:" design="Bold" />
                            <List items="{main>/header/attachments/items}">
                                <items>
                                    <CustomListItem>
                                        <HBox alignItems="Center">
                                            <Title class="sapUiTinyMarginBeginEnd"
                                                text="{main>text}" />
                                            <Button class="sapUiTinyMarginBeginEnd"
                                                icon="sap-icon://attachment"
                                                press="onDownloadPress" />
                                        </HBox>
                                    </CustomListItem>
                                </items>
                            </List>
                        </ScrollContainer>
                    </HBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <IconTabBar selectedKey="0">
                <items>
                    <IconTabFilter text="Proposta Prodotti"
                        key="0">
                        <content>
                            <core:Fragment fragmentName="cles.agenti.view.fragment.PropostaProdotti"
                                type="XML" />
                        </content>
                    </IconTabFilter>
                    <IconTabFilter text="Storico Ordini"
                        key="1">
                        <content>
                            <core:Fragment fragmentName="cles.agenti.view.fragment.StoricoOrdini2"
                                type="XML" />
                        </content>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
        <f:footer>
            <OverflowToolbar >
                <ToolbarSpacer />
                <Button text="Crea Ordine di Vendita"
                    icon="sap-icon://create-form"
                    press=".onCreaOdvPress"
                    type="Emphasized" />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
