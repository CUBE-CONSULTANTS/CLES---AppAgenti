<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:grid="sap.ui.layout.cssgrid"
>
    <VBox>
        <core:Fragment
            fragmentName="cles.agenti.view.fragment.common.FilterBar"
            type="XML"
        />
        <ScrollContainer
            height="500px"
            vertical="true"
        >
            <List
                id="catalogo_list"
                width="100%"
                mode="None"
                growing="true"
                growingThreshold="20"
                growingScrollToLoad="true"
                sticky="HeaderToolbar,ColumnHeaders,InfoToolbar"
                items="{
                  path: 'proposta>/table/items', 
                  sorter: {
                    path: 'category',
                    descending: false,
                    group: '.getGroup'
                  },
                  groupHeaderFactory: '.getGroupFactory'
                }"
            >
                <headerToolbar>
                    <core:Fragment
                        fragmentName="cles.agenti.view.fragment.common.HeaderToolbar"
                        type="XML"
                    />
                </headerToolbar>
                <items>
                    <CustomListItem
                        type="Active"
                        press=".onProductListItemPress($event, 'CATALOGO')"
                    >
                        <grid:CSSGrid>
                            <grid:customLayout>
                                <grid:GridResponsiveLayout>
                                    <grid:layoutS>
                                        <grid:GridSettings
                                            gridTemplateColumns="1fr 1fr"
                                            gridGap="0.1rem"
                                        />
                                    </grid:layoutS>
                                    <grid:layout>
                                        <grid:GridSettings
                                            gridTemplateColumns="2fr 6fr 6fr"
                                            gridGap="0.1rem"
                                        />
                                    </grid:layout>
                                    <grid:layoutXL>
                                        <grid:GridSettings
                                            gridTemplateColumns="1fr 6fr 4fr 4fr 2fr"
                                            gridRowGap="0.5rem"
                                            gridColumnGap="0.5rem"
                                        />
                                    </grid:layoutXL>
                                </grid:GridResponsiveLayout>
                            </grid:customLayout>

                            <VBox
                                class="sapUiResponsiveMargin"
                            >
                                <Image
                                    class="circularImage"
                                    src="{proposta>src}"
                                    lazyLoading="true"
                                    width="6rem"
                                    height="6rem"
                                    press=".onShowPhotoPress"
                                />
                            </VBox>
                            <VBox
                                class="sapUiResponsiveMargin"
                                justifyContent="Start"
                            >
                                <ObjectStatus
                                    inverted="true"
                                    state="Indication12"
                                    text="{proposta>category}"
                                />
                                <Label
                                    class="sapUiTinyMarginTop"
                                    wrapping="true"
                                    design="Bold"
                                    text="{proposta>description} ({proposta>product})"
                                />
                                <ObjectNumber
                                    class="sapMObjectNumberLarge sapUiTinyMarginTop"
                                    number="{proposta>listino}"
                                    inverted="true"
                                    emphasized="true"
                                    state="Information"
                                />
                            </VBox>
                            <VBox class="sapUiResponsiveMargin">
                                <Label
                                    design="Bold"
                                    text="DisponibilitÃ : {proposta>disponibilita}"
                                />
                                <ProgressIndicator
                                    percentValue="{= 
                                      ${proposta>disponibilita} &lt; 1 ? '0' :
                                      ${proposta>disponibilita} &lt; 5 ? '25' :
                                      ${proposta>disponibilita} &lt; 5 ? '25' :
                                      ${proposta>disponibilita} &lt; 10 ? '50' :
                                      '75'
                                    }"
                                    showValue="false"
                                    state="{= 
                                      ${proposta>disponibilita} &lt; 5 ? 'Error' :
                                      ${proposta>disponibilita} &lt; 10 ? 'Warning' :
                                      'Success'
                                    }"
                                />
                                <StepInput
                                    class="sapUiTinyMarginTop"
                                    change=".onStepInputChange"
                                    min="0"
                                />
                            </VBox>
                            <VBox
                                class="sapUiResponsiveMargin"
                                alignItems="End"
                            >
                                <ObjectStatus
                                    text="{proposta>status_text}"
                                    active="true"
                                    inverted="true"
                                    state="{proposta>status_state}"
                                />
                            </VBox>
                        </grid:CSSGrid>
                    </CustomListItem>
                </items>
            </List>
        </ScrollContainer>
    </VBox>
</core:FragmentDefinition>
