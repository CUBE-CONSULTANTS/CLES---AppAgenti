sap.ui.define(["./BaseController","../model/Dialog","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,o,r){"use strict";return t.extend("cles.agenti.controller.Ordine",{onInit(){this.getRouter().getRoute("Ordine").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched(t){this.getModel("layout").setProperty("/layoutMode","MidColumnFullScreen")},onRiepilogoPress(){this.getRouter().navTo("Riepilogo")},onObjectPageSectionChange(t){const{section:e}=t.getParameters();if(e.getId().includes("catalogo"))this.getModel("proposta").setProperty("/objectPageLayout/currentList","catalogo_list");else if(e.getId().includes("storicoOrdini"))this.getModel("proposta").setProperty("/objectPageLayout/currentList","storico_list");else if(e.getId().includes("propostaProdotti"))this.getModel("proposta").setProperty("/objectPageLayout/currentList","proposta_list")},getGroup(t){return t.getProperty("order_id")},getGroupFactory(t){return new sap.m.GroupHeaderListItem({title:t.key})},onSearch(t,e){const{newValue:s}=t.getParameters();const i=this.byId(e);const a=i.getBinding("items");if(!s)return a.filter([]);return a.filter([new o({filters:[new o({path:"product",operator:r.Contains,value1:s}),new o({path:"category",operator:r.Contains,value1:s}),new o({path:"description",operator:r.Contains,value1:s})],and:false})])},onFilterPress(t){e.getFiltersDialog({controller:this})},onFiltriCategorieButtonPress:function(t,e){const s=t.getSource().getBindingContext("proposta");const i=s.getModel();const a=s.getProperty("type");const n=this.byId(this.getModel("proposta").getProperty("/objectPageLayout/currentList"));const c=n.getBinding("items");const l=i.getProperty("/table/toolbar/filtri/categorie").map(t=>({...t,type:"Default"}));i.setProperty("/table/toolbar/filtri/categorie",l);if(a==="Emphasized"){s.setProperty("type","Default");c.filter([])}else if(a==="Default"){s.setProperty("type","Emphasized");c.filter(new o("category",r.EQ,s.getProperty("text").toUpperCase()))}},onFiltriCaratteristicheButtonPress:function(t){const e=t.getSource().getBindingContext("proposta");const s=e.getModel();const i=e.getProperty("type");const a=this.byId(this.getModel("proposta").getProperty("/objectPageLayout/currentList"));const n=s.getProperty("/table/toolbar/filtri/caratteristiche").map(t=>({...t,type:"Default"}));s.setProperty("/table/toolbar/filtri/caratteristiche",n);if(i==="Reject"){e.setProperty("type","Default");a.getBinding("items").filter([])}else if(i==="Default"){e.setProperty("type","Reject");a.getBinding("items").filter(new o("status_text",r.EQ,e.getProperty("text").toUpperCase()))}},onProductListItemPress(t,e){const{description:o,product:r,src:s}=t.getSource().getBindingContext("proposta").getObject();this.getModel("product").setData({from:e,product:{id:r,description:o,notes:[{nota_1:"test nota 1"}]},carousel:{pages:[{src:s},{src:s},{src:s}]}});this.getRouter().navTo("Product",{from:e,product:r})},onShowProductDetailPress(t){e.getProductDetailDialog({controller:this})},onShowProductAttachmentsPress(){e.getProductAttachmentDialog({controller:this})},onAddNotePress(t){const o=this.getModel("product").getProperty("/product");e.getAddNoteDialog({controller:this,prodotto:o})},onCreaOdvConfirm(){MessageBox.success("Ordine di vendita creato con successo",{onClose:()=>sap.m.InstanceManager.closeAllDialogs()})}})});
//# sourceMappingURL=Ordine.controller.js.map